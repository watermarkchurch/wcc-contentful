<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: WCC::Contentful
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "WCC::Contentful";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span>
     &raquo; 
    <span class="title">Contentful</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: WCC::Contentful
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/wcc/contentful.rb<span class="defines">,<br />
  lib/wcc/contentful/version.rb,<br /> lib/wcc/contentful/services.rb,<br /> lib/wcc/contentful/exceptions.rb,<br /> lib/wcc/contentful/sync_engine.rb,<br /> lib/wcc/contentful/model_builder.rb,<br /> lib/wcc/contentful/simple_client.rb,<br /> lib/wcc/contentful/instrumentation.rb,<br /> lib/wcc/contentful/webhook_enable_job.rb,<br /> lib/wcc/contentful/content_type_indexer.rb,<br /> lib/wcc/contentful/indexed_representation.rb,<br /> app/controllers/wcc/contentful/webhook_controller.rb,<br /> app/controllers/wcc/contentful/application_controller.rb,<br /> lib/wcc/contentful/engine.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The root namespace of the wcc-contentful gem</p>

<p>Initialize the gem with the â€˜configure` and `init` methods inside your initializer.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Contentful/ActiveRecordShim.html" title="WCC::Contentful::ActiveRecordShim (module)">ActiveRecordShim</a></span>, <span class='object_link'><a href="Contentful/EntryLocaleTransformer.html" title="WCC::Contentful::EntryLocaleTransformer (module)">EntryLocaleTransformer</a></span>, <span class='object_link'><a href="Contentful/Event.html" title="WCC::Contentful::Event (module)">Event</a></span>, <span class='object_link'><a href="Contentful/Helpers.html" title="WCC::Contentful::Helpers (module)">Helpers</a></span>, <span class='object_link'><a href="Contentful/Instrumentation.html" title="WCC::Contentful::Instrumentation (module)">Instrumentation</a></span>, <span class='object_link'><a href="Contentful/Middleware.html" title="WCC::Contentful::Middleware (module)">Middleware</a></span>, <span class='object_link'><a href="Contentful/ModelAPI.html" title="WCC::Contentful::ModelAPI (module)">ModelAPI</a></span>, <span class='object_link'><a href="Contentful/ModelMethods.html" title="WCC::Contentful::ModelMethods (module)">ModelMethods</a></span>, <span class='object_link'><a href="Contentful/ModelSingletonMethods.html" title="WCC::Contentful::ModelSingletonMethods (module)">ModelSingletonMethods</a></span>, <span class='object_link'><a href="Contentful/RSpec.html" title="WCC::Contentful::RSpec (module)">RSpec</a></span>, <span class='object_link'><a href="Contentful/RichText.html" title="WCC::Contentful::RichText (module)">RichText</a></span>, <span class='object_link'><a href="Contentful/ServiceAccessors.html" title="WCC::Contentful::ServiceAccessors (module)">ServiceAccessors</a></span>, <span class='object_link'><a href="Contentful/Store.html" title="WCC::Contentful::Store (module)">Store</a></span>, <span class='object_link'><a href="Contentful/Test.html" title="WCC::Contentful::Test (module)">Test</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Contentful/ActionViewRichTextRenderer.html" title="WCC::Contentful::ActionViewRichTextRenderer (class)">ActionViewRichTextRenderer</a></span>, <span class='object_link'><a href="Contentful/ApplicationController.html" title="WCC::Contentful::ApplicationController (class)">ApplicationController</a></span>, <span class='object_link'><a href="Contentful/CircularReferenceError.html" title="WCC::Contentful::CircularReferenceError (class)">CircularReferenceError</a></span>, <span class='object_link'><a href="Contentful/Configuration.html" title="WCC::Contentful::Configuration (class)">Configuration</a></span>, <span class='object_link'><a href="Contentful/ContentTypeIndexer.html" title="WCC::Contentful::ContentTypeIndexer (class)">ContentTypeIndexer</a></span>, <span class='object_link'><a href="Contentful/ContentTypeNotFoundError.html" title="WCC::Contentful::ContentTypeNotFoundError (class)">ContentTypeNotFoundError</a></span>, <span class='object_link'><a href="Contentful/DownloadsSchema.html" title="WCC::Contentful::DownloadsSchema (class)">DownloadsSchema</a></span>, <span class='object_link'><a href="Contentful/Engine.html" title="WCC::Contentful::Engine (class)">Engine</a></span>, <span class='object_link'><a href="Contentful/Events.html" title="WCC::Contentful::Events (class)">Events</a></span>, <span class='object_link'><a href="Contentful/IndexedRepresentation.html" title="WCC::Contentful::IndexedRepresentation (class)">IndexedRepresentation</a></span>, <span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span>, <span class='object_link'><a href="Contentful/Link.html" title="WCC::Contentful::Link (class)">Link</a></span>, <span class='object_link'><a href="Contentful/LinkVisitor.html" title="WCC::Contentful::LinkVisitor (class)">LinkVisitor</a></span>, <span class='object_link'><a href="Contentful/LocaleMismatchError.html" title="WCC::Contentful::LocaleMismatchError (class)">LocaleMismatchError</a></span>, <span class='object_link'><a href="Contentful/Model.html" title="WCC::Contentful::Model (class)">Model</a></span>, <span class='object_link'><a href="Contentful/ModelBuilder.html" title="WCC::Contentful::ModelBuilder (class)">ModelBuilder</a></span>, <span class='object_link'><a href="Contentful/ResolveError.html" title="WCC::Contentful::ResolveError (class)">ResolveError</a></span>, <span class='object_link'><a href="Contentful/RichTextRenderer.html" title="WCC::Contentful::RichTextRenderer (class)">RichTextRenderer</a></span>, <span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span>, <span class='object_link'><a href="Contentful/SimpleClient.html" title="WCC::Contentful::SimpleClient (class)">SimpleClient</a></span>, <span class='object_link'><a href="Contentful/SyncEngine.html" title="WCC::Contentful::SyncEngine (class)">SyncEngine</a></span>, <span class='object_link'><a href="Contentful/SyncError.html" title="WCC::Contentful::SyncError (class)">SyncError</a></span>, <span class='object_link'><a href="Contentful/WebhookController.html" title="WCC::Contentful::WebhookController (class)">WebhookController</a></span>, <span class='object_link'><a href="Contentful/WebhookEnableJob.html" title="WCC::Contentful::WebhookEnableJob (class)">WebhookEnableJob</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="VERSION-constant" class="">VERSION =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.7.0</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="SERVICES-constant" class="">SERVICES =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'>Contentful</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance_methods'>instance_methods</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
<span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'>Contentful</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance_method'>instance_method</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='op'>==</span> <span class='int'>0</span> <span class='rbrace'>}</span></pre></dd>
      
    </dl>
  




  <h2>Class Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration-class_method" title="configuration (class method)">.<strong>configuration</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets the current configuration, after calling WCC::Contentful.configure.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialized-class_method" title="initialized (class method)">.<strong>initialized</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute initialized.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configure-class_method" title="configure (class method)">.<strong>configure</strong> {|configuration| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Configures the WCC::Contentful gem to talk to a Contentful space.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deprecator-class_method" title="deprecator (class method)">.<strong>deprecator</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init!-class_method" title="init! (class method)">.<strong>init!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the WCC::Contentful model-space and backing store.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#locales-class_method" title="locales (class method)">.<strong>locales</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets all queryable locales.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logger-class_method" title="logger (class method)">.<strong>logger</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#types-class_method" title="types (class method)">.<strong>types</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="class_attr_details" class="attr_details">
    <h2>Class Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="configuration-class_method">
  
    .<strong>configuration</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets the current configuration, after calling WCC::Contentful.configure</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configuration'>configuration</span>
  <span class='ivar'>@configuration</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="initialized-class_method">
  
    .<strong>initialized</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute initialized.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialized'>initialized</span>
  <span class='ivar'>@initialized</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="configure-class_method">
  
    .<strong>configure</strong> {|configuration| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Configures the WCC::Contentful gem to talk to a Contentful space. This must be called first in your initializer, before #init! or accessing the client. See WCC::Contentful::Configuration for all configuration options.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#configuration-class_method" title="WCC::Contentful.configuration (method)">configuration</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 73</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_configure'>configure</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot configure after initialization</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='ivar'>@initialized</span>

  <span class='ivar'>@configuration</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="Contentful/Configuration.html" title="WCC::Contentful::Configuration (class)">Configuration</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Contentful/Configuration.html#initialize-instance_method" title="WCC::Contentful::Configuration#initialize (method)">new</a></span></span>
  <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_validate!'>validate!</span>

  <span class='id identifier rubyid_configuration'>configuration</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deprecator-class_method">
  
    .<strong>deprecator</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deprecator'>deprecator</span>
  <span class='ivar'>@deprecator</span> <span class='op'>||=</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_next_major_version'>next_major_version</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="#VERSION-constant" title="WCC::Contentful::VERSION (constant)">VERSION</a></span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span>
      <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_next_major_version'>next_major_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>.0</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wcc-contentful</span><span class='tstring_end'>&#39;</span></span>
      <span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init!-class_method">
  
    .<strong>init!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initializes the WCC::Contentful model-space and backing store. This populates the WCC::Contentful::Model namespace with Ruby classes that represent content types in the configured Contentful space.</p>

<p>These content types can be queried directly:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Model.html" title="WCC::Contentful::Model (class)">Model</a></span></span><span class='op'>::</span><span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1xab...</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>Or you can inherit from them in your own app:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Page</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Model.html" title="WCC::Contentful::Model (class)">Model</a></span></span><span class='op'>::</span><span class='const'>Page</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='label'>slug:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>about-us</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 93</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_init!'>init!</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Please first call WCC:Contentful.configure</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Already Initialized</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='ivar'>@initialized</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_update_schema_file'>update_schema_file</span> <span class='op'>==</span> <span class='symbol'>:always</span> <span class='op'>||</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_update_schema_file'>update_schema_file</span> <span class='op'>==</span> <span class='symbol'>:if_possible</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_management_client'>management_client</span><span class='rparen'>)</span> <span class='op'>||</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_update_schema_file'>update_schema_file</span> <span class='op'>==</span> <span class='symbol'>:if_missing</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_schema_file'>schema_file</span><span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='kw'>begin</span>
      <span class='id identifier rubyid_downloader'>downloader</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/DownloadsSchema.html" title="WCC::Contentful::DownloadsSchema (class)">DownloadsSchema</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Contentful/DownloadsSchema.html#initialize-instance_method" title="WCC::Contentful::DownloadsSchema#initialize (method)">new</a></span></span>
      <span class='id identifier rubyid_downloader'>downloader</span><span class='period'>.</span><span class='id identifier rubyid_update!'>update!</span> <span class='kw'>if</span> <span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_update_schema_file'>update_schema_file</span> <span class='op'>==</span> <span class='symbol'>:always</span> <span class='op'>||</span> <span class='id identifier rubyid_downloader'>downloader</span><span class='period'>.</span><span class='id identifier rubyid_needs_update?'>needs_update?</span>
    <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SimpleClient.html" title="WCC::Contentful::SimpleClient (class)">SimpleClient</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SimpleClient/ApiError.html" title="WCC::Contentful::SimpleClient::ApiError (class)">ApiError</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span> <span class='kw'>if</span> <span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_update_schema_file'>update_schema_file</span> <span class='op'>==</span> <span class='symbol'>:always</span>

      <span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to download schema from management API - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_schema'>schema</span> <span class='op'>=</span>
    <span class='kw'>begin</span>
      <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_schema_file'>schema_file</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_schema_file'>schema_file</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'>ParserError</span>
      <span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Schema file invalid, ignoring it: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_schema_file'>schema_file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>nil</span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_content_types'>content_types</span> <span class='op'>=</span> <span class='id identifier rubyid_schema'>schema</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>contentTypes</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_schema'>schema</span>
  <span class='id identifier rubyid_locales'>locales</span> <span class='op'>=</span> <span class='id identifier rubyid_schema'>schema</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>locales</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_schema'>schema</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_schema'>schema</span> <span class='op'>&amp;&amp;</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>if_possible</span><span class='words_sep'> </span><span class='tstring_content'>never</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_update_schema_file'>update_schema_file</span><span class='rparen'>)</span>
    <span class='comment'># Final fallback - try to grab content types from CDN.  We can&#39;t update the file
</span>    <span class='comment'># because the CDN doesn&#39;t have all the field validation info, but we can at least
</span>    <span class='comment'># build the WCC::Contentful::Model instances.
</span>    <span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_management_client'>management_client</span> <span class='op'>||</span>
      <span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_client'>client</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_content_types'>content_types</span> <span class='op'>=</span> <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_content_types'>content_types</span><span class='lparen'>(</span><span class='label'>limit:</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_items'>items</span> <span class='kw'>if</span> <span class='id identifier rubyid_client'>client</span>
    <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SimpleClient.html" title="WCC::Contentful::SimpleClient (class)">SimpleClient</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SimpleClient/ApiError.html" title="WCC::Contentful::SimpleClient::ApiError (class)">ApiError</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='comment'># indicates bad credentials
</span>      <span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to load content types from API - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_content_types'>content_types</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Contentful/InitializationError.html" title="WCC::Contentful::InitializationError (class)">InitializationError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unable to load content types from schema file or API! </span><span class='tstring_end'>&#39;</span></span> \
                               <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Check your access token and space ID.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Set the schema on the default WCC::Contentful::Model
</span>  <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Model.html" title="WCC::Contentful::Model (class)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_configure'><span class='object_link'><a href="#configure-class_method" title="WCC::Contentful.configure (method)">configure</a></span></span><span class='lparen'>(</span>
    <span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span>
    <span class='label'>schema:</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/ContentTypeIndexer.html" title="WCC::Contentful::ContentTypeIndexer (class)">ContentTypeIndexer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_json_schema'><span class='object_link'><a href="Contentful/ContentTypeIndexer.html#from_json_schema-class_method" title="WCC::Contentful::ContentTypeIndexer.from_json_schema (method)">from_json_schema</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_content_types'>content_types</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_types'>types</span><span class='comma'>,</span>
    <span class='label'>services:</span> <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span>
  <span class='rparen'>)</span>

  <span class='comment'># Update the locale fallbacks from the schema file, unless they have already
</span>  <span class='comment'># been configured.
</span>  <span class='id identifier rubyid_locales'>locales</span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_locale_hash'>locale_hash</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='ivar'>@configuration</span><span class='period'>.</span><span class='id identifier rubyid_locale_fallbacks'>locale_fallbacks</span><span class='lbracket'>[</span><span class='id identifier rubyid_locale_hash'>locale_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span>

    <span class='ivar'>@configuration</span><span class='period'>.</span><span class='id identifier rubyid_locale_fallbacks'>locale_fallbacks</span><span class='lbracket'>[</span><span class='id identifier rubyid_locale_hash'>locale_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_locale_hash'>locale_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fallbackCode</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># Enqueue an initial sync
</span>  <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SyncEngine.html" title="WCC::Contentful::SyncEngine (class)">SyncEngine</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SyncEngine/Job.html" title="WCC::Contentful::SyncEngine::Job (class)">Job</a></span></span><span class='period'>.</span><span class='id identifier rubyid_perform_later'>perform_later</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SyncEngine.html" title="WCC::Contentful::SyncEngine (class)">SyncEngine</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/SyncEngine/Job.html" title="WCC::Contentful::SyncEngine::Job (class)">Job</a></span></span><span class='rparen'>)</span>

  <span class='ivar'>@configuration</span> <span class='op'>=</span> <span class='ivar'>@configuration</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='ivar'>@initialized</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="locales-class_method">
  
    .<strong>locales</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets all queryable locales.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_locales'>locales</span>
  <span class='id identifier rubyid_configuration'>configuration</span><span class='op'>&amp;.</span><span class='id identifier rubyid_locale_fallbacks'>locale_fallbacks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logger-class_method">
  
    .<strong>logger</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logger'>logger</span>
  <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='period'>.</span><span class='id identifier rubyid_deprecator'><span class='object_link'><a href="#deprecator-class_method" title="WCC::Contentful.deprecator (method)">deprecator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Use WCC::Contentful::Services.instance.logger instead</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Services.html" title="WCC::Contentful::Services (class)">Services</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="Contentful/Services.html#instance-class_method" title="WCC::Contentful::Services.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="types-class_method">
  
    .<strong>types</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_types'>types</span>
  <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='period'>.</span><span class='id identifier rubyid_deprecator'><span class='object_link'><a href="#deprecator-class_method" title="WCC::Contentful.deprecator (method)">deprecator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Use WCC::Contentful::Model.schema instead</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../WCC.html" title="WCC (module)">WCC</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="WCC::Contentful (module)">Contentful</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Contentful/Model.html" title="WCC::Contentful::Model (class)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.3.5).
</div>

    </div>
  </body>
</html>