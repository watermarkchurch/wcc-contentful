<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: WCC::Contentful::Middleware::Store::LocaleMiddleware
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "WCC::Contentful::Middleware::Store::LocaleMiddleware";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (L)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../WCC.html" title="WCC (module)">WCC</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Contentful.html" title="WCC::Contentful (module)">Contentful</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Middleware.html" title="WCC::Contentful::Middleware (module)">Middleware</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Store.html" title="WCC::Contentful::Middleware::Store (module)">Store</a></span></span>
     &raquo; 
    <span class="title">LocaleMiddleware</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: WCC::Contentful::Middleware::Store::LocaleMiddleware
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">WCC::Contentful::Middleware::Store::LocaleMiddleware</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../../EntryLocaleTransformer.html" title="WCC::Contentful::EntryLocaleTransformer (module)">EntryLocaleTransformer</a></span>, <span class='object_link'><a href="../Store.html" title="WCC::Contentful::Middleware::Store (module)">WCC::Contentful::Middleware::Store</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/wcc/contentful/middleware/store/locale_middleware.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This middleware enforces that all entries returned by the store layer are properly localized. It does this by transforming entries from the store’s “locale=*” format into the specified locale (or default).</p>

<p>Stores keep entries in the “locale=*” format, which is a hash of all locales for each field.  This is convenient because the Sync API returns them in this format.  However, the Model layer requires localized entries.  So, to separate concerns, this middleware handles the transformation.</p>


  </div>
</div>
<div class="tags">
  

</div>


  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../Store/Interface.html" title="WCC::Contentful::Store::Interface (module)">Store::Interface</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Store/Interface.html#INTERFACE_METHODS-constant" title="WCC::Contentful::Store::Interface::INTERFACE_METHODS (constant)">Store::Interface::INTERFACE_METHODS</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration-instance_method" title="#configuration (instance method)">#<strong>configuration</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute configuration.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="../Store.html" title="WCC::Contentful::Middleware::Store (module)">WCC::Contentful::Middleware::Store</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Store.html#store-instance_method" title="WCC::Contentful::Middleware::Store#store (method)">#store</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_locale-instance_method" title="#default_locale (instance method)">#<strong>default_locale</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transform-instance_method" title="#transform (instance method)">#<strong>transform</strong>(entry, options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../EntryLocaleTransformer.html" title="WCC::Contentful::EntryLocaleTransformer (module)">EntryLocaleTransformer</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../EntryLocaleTransformer.html#reduce_to_star-instance_method" title="WCC::Contentful::EntryLocaleTransformer#reduce_to_star (method)">#reduce_to_star</a></span>, <span class='object_link'><a href="../../EntryLocaleTransformer.html#transform_to_locale-instance_method" title="WCC::Contentful::EntryLocaleTransformer#transform_to_locale (method)">#transform_to_locale</a></span>, <span class='object_link'><a href="../../EntryLocaleTransformer.html#transform_to_star-instance_method" title="WCC::Contentful::EntryLocaleTransformer#transform_to_star (method)">#transform_to_star</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Store.html" title="WCC::Contentful::Middleware::Store (module)">WCC::Contentful::Middleware::Store</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Store.html#find-instance_method" title="WCC::Contentful::Middleware::Store#find (method)">#find</a></span>, <span class='object_link'><a href="../Store.html#find_all-instance_method" title="WCC::Contentful::Middleware::Store#find_all (method)">#find_all</a></span>, <span class='object_link'><a href="../Store.html#find_by-instance_method" title="WCC::Contentful::Middleware::Store#find_by (method)">#find_by</a></span>, <span class='object_link'><a href="../Store.html#has_select%3F-instance_method" title="WCC::Contentful::Middleware::Store#has_select? (method)">#has_select?</a></span>, <span class='object_link'><a href="../Store.html#resolve_includes-instance_method" title="WCC::Contentful::Middleware::Store#resolve_includes (method)">#resolve_includes</a></span>, <span class='object_link'><a href="../Store.html#resolve_link-instance_method" title="WCC::Contentful::Middleware::Store#resolve_link (method)">#resolve_link</a></span>, <span class='object_link'><a href="../Store.html#resolved_link%3F-instance_method" title="WCC::Contentful::Middleware::Store#resolved_link? (method)">#resolved_link?</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Store/Interface.html" title="WCC::Contentful::Store::Interface (module)">Store::Interface</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Store/Interface.html#find-instance_method" title="WCC::Contentful::Store::Interface#find (method)">#find</a></span>, <span class='object_link'><a href="../../Store/Interface.html#find_all-instance_method" title="WCC::Contentful::Store::Interface#find_all (method)">#find_all</a></span>, <span class='object_link'><a href="../../Store/Interface.html#find_by-instance_method" title="WCC::Contentful::Store::Interface#find_by (method)">#find_by</a></span>, <span class='object_link'><a href="../../Store/Interface.html#index-instance_method" title="WCC::Contentful::Store::Interface#index (method)">#index</a></span>, <span class='object_link'><a href="../../Store/Interface.html#index%3F-instance_method" title="WCC::Contentful::Store::Interface#index? (method)">#index?</a></span></p>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="configuration=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="configuration-instance_method">
  
    #<strong>configuration</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute configuration.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful/middleware/store/locale_middleware.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configuration'>configuration</span>
  <span class='ivar'>@configuration</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="default_locale-instance_method">
  
    #<strong>default_locale</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful/middleware/store/locale_middleware.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_locale'>default_locale</span>
  <span class='ivar'>@default_locale</span> <span class='op'>||=</span> <span class='id identifier rubyid_configuration'>configuration</span><span class='op'>&amp;.</span><span class='id identifier rubyid_default_locale'>default_locale</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>en-US</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transform-instance_method">
  
    #<strong>transform</strong>(entry, options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful/middleware/store/locale_middleware.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transform'>transform</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_locale'>locale</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>||</span> <span class='id identifier rubyid_default_locale'>default_locale</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_locale'>locale</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>*</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_transform_to_star'>transform_to_star</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_transform_to_locale'>transform_to_locale</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.3.5).
</div>

    </div>
  </body>
</html>