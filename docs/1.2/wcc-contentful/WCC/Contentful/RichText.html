<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: WCC::Contentful::RichText
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "WCC::Contentful::RichText";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../WCC.html" title="WCC (module)">WCC</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Contentful.html" title="WCC::Contentful (module)">Contentful</a></span></span>
     &raquo; 
    <span class="title">RichText</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: WCC::Contentful::RichText
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/wcc/contentful/rich_text.rb<span class="defines">,<br />
  lib/wcc/contentful/rich_text/node.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This module contains a number of structs representing nodes in a Contentful rich text field.  When the Model layer parses a Rich Text field from Contentful, it is turned into a WCC::Contentful::RichText::Document node. The <span class='object_link'><a href="RichText/Document.html#content-instance_method" title="WCC::Contentful::RichText::Document#content (method)">content</a></span> method of this node is an Array containing paragraph, blockquote, entry, and other nodes.</p>

<p>The various structs in the RichText object model are designed to mimic the Hash interface, so that the indexing operator ‘#[]` and the `#dig` method can be used to traverse the data.  The data can also be accessed by the attribute reader methods defined on the structs.  Both of these are considered part of the public API of the model and will not change.</p>

<p>In a future release we plan to implement automatic link resolution.  When that happens, the ‘.data` attribute of embedded entries and assets will return a new class that is able to resolve the `.target` automatically into a full entry or asset.  This future class will still respect the hash accessor methods `#[]`, `#dig`, `#keys`, and `#each`, so it is safe to use those.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="RichText/Node.html" title="WCC::Contentful::RichText::Node (module)">Node</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="RichText/Blockquote.html" title="WCC::Contentful::RichText::Blockquote (class)">Blockquote</a></span>, <span class='object_link'><a href="RichText/Document.html" title="WCC::Contentful::RichText::Document (class)">Document</a></span>, <span class='object_link'><a href="RichText/EmbeddedAssetBlock.html" title="WCC::Contentful::RichText::EmbeddedAssetBlock (class)">EmbeddedAssetBlock</a></span>, <span class='object_link'><a href="RichText/EmbeddedEntryBlock.html" title="WCC::Contentful::RichText::EmbeddedEntryBlock (class)">EmbeddedEntryBlock</a></span>, <span class='object_link'><a href="RichText/EmbeddedEntryInline.html" title="WCC::Contentful::RichText::EmbeddedEntryInline (class)">EmbeddedEntryInline</a></span>, <span class='object_link'><a href="RichText/Paragraph.html" title="WCC::Contentful::RichText::Paragraph (class)">Paragraph</a></span>, <span class='object_link'><a href="RichText/Text.html" title="WCC::Contentful::RichText::Text (class)">Text</a></span>, <span class='object_link'><a href="RichText/Unknown.html" title="WCC::Contentful::RichText::Unknown (class)">Unknown</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tokenize-class_method" title="tokenize (class method)">.<strong>tokenize</strong>(raw, context = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Recursively converts a raw JSON-parsed hash into the RichText object model.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="tokenize-class_method">
  
    .<strong>tokenize</strong>(raw, context = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Recursively converts a raw JSON-parsed hash into the RichText object model.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wcc/contentful/rich_text.rb', line 26</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tokenize'>tokenize</span><span class='lparen'>(</span><span class='id identifier rubyid_raw'>raw</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_raw'>raw</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_raw'>raw</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_tokenize'>tokenize</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_raw'>raw</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_raw'>raw</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nodeType</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>document</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><span class='object_link'><a href="RichText/Document.html" title="WCC::Contentful::RichText::Document (class)">Document</a></span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>paragraph</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><span class='object_link'><a href="RichText/Paragraph.html" title="WCC::Contentful::RichText::Paragraph (class)">Paragraph</a></span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>blockquote</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><span class='object_link'><a href="RichText/Blockquote.html" title="WCC::Contentful::RichText::Blockquote (class)">Blockquote</a></span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><span class='object_link'><a href="RichText/Text.html" title="WCC::Contentful::RichText::Text (class)">Text</a></span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>embedded-entry-inline</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><span class='object_link'><a href="RichText/EmbeddedEntryInline.html" title="WCC::Contentful::RichText::EmbeddedEntryInline (class)">EmbeddedEntryInline</a></span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>embedded-entry-block</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><span class='object_link'><a href="RichText/EmbeddedEntryBlock.html" title="WCC::Contentful::RichText::EmbeddedEntryBlock (class)">EmbeddedEntryBlock</a></span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>embedded-asset-block</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><span class='object_link'><a href="RichText/EmbeddedAssetBlock.html" title="WCC::Contentful::RichText::EmbeddedAssetBlock (class)">EmbeddedAssetBlock</a></span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>heading\-(\d+)</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_const_get'>const_get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Heading</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='const'><span class='object_link'><a href="RichText/Unknown.html" title="WCC::Contentful::RichText::Unknown (class)">Unknown</a></span></span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_tokenize'>tokenize</span><span class='lparen'>(</span><span class='id identifier rubyid_raw'>raw</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.1.1).
</div>

    </div>
  </body>
</html>